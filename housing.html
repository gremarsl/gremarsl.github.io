<style>
  /* Responsive input fields for mobile */
  input[type="number"] {
    min-width: 80px;
    width: 100%;
    max-width: 300px;
    box-sizing: border-box;
    font-size: 1.1em;
    padding: 0.3em;
    margin-top: 0.2em;
    margin-bottom: 0.6em;
  }
  label {
    display: block;
    margin-bottom: 0.2em;
  }
  @media (max-width: 600px) {
    div[style*="font-family:monospace;"] {
      font-size: 1em;
    }
    input[type="number"] {
      font-size: 1.2em;
      min-width: 120px;
      max-width: 100%;
    }
  }
</style>
<!-- Financial Input Parameters and Index Calculation -->
<div style="font-family:monospace;">
  <h3>Das sind deine angenommenen Finanz-Inputparameter:</h3>
  <label>
    Kaufpreis [€]:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="number" id="housing_cost" value="500000" min="0" step="1" style="width:8em;">
  </label><br>
  <label>
    Jah­res­net­to­ein­kom­men [€]: 
    <input type="number" id="netto_income_per_anno" value="60000" min="0" step="1" style="width:8em;">
  </label><br>
  <label>
    Monatskaltmiete [€]:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="number" id="cold_rent_per_month" value="1500" min="0" step="1" style="width:8em;">
  </label><br><br>
  <div id="finanz-parameter"></div>
  <div id="index"></div>
  <div id="vervielfaeltiger"></div>
</div>

<script>
  function updateOutput() {
    const housing_cost = Number(document.getElementById('housing_cost').value);
    const netto_income_per_anno = Number(document.getElementById('netto_income_per_anno').value);
    const cold_rent_per_month = Number(document.getElementById('cold_rent_per_month').value);

    document.getElementById('finanz-parameter').innerHTML = `
      -> Kaufpreis:&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${(housing_cost).toLocaleString('de-DE')} €<br>
      -> Jah­res­net­to­ein­kom­men:     ${(netto_income_per_anno).toLocaleString('de-DE')} €<br>
      -> Monatskaltmiete: &nbsp;&nbsp;&nbsp;&nbsp;         ${cold_rent_per_month.toLocaleString('de-DE')} €
    `;

    const index = netto_income_per_anno > 0 ? (housing_cost / netto_income_per_anno).toFixed(2) : '—';
    document.getElementById('index').innerHTML = `<br>Kaufpreis-Jah­res­net­to­ein­kom­men Index: ${index}`;

    const vervielfaeltiger = cold_rent_per_month > 0 ? (housing_cost / (cold_rent_per_month * 12)).toFixed(2) : '—';
    document.getElementById('vervielfaeltiger').innerHTML = `Vervielfältiger-Index Kaufpreis-Jahreskaltmiete: ${vervielfaeltiger}`;
  }

  // Initial output
  updateOutput();

  // Add event listeners
  document.getElementById('housing_cost').addEventListener('input', updateOutput);
  document.getElementById('netto_income_per_anno').addEventListener('input', updateOutput);
  document.getElementById('cold_rent_per_month').addEventListener('input', updateOutput);
</script>


<!-- Visuelle Trennung -->
<hr style="margin: 2em 0; border: 0; border-top: 2px dashed #888;">


<!-- Gesamte Mietzahlungen über X Jahre (mit und ohne Steigerung) -->
<div style="font-family:monospace;">
  <h3>Gesamte Mietzahlungen</h3>
  <label>
    Monatsmiete [€]:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="number" id="miete_monat" value="1500" min="0" step="1" style="width:4em;">
  </label><br>
  <label>
    Zeitraum [Jahre]:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="number" id="miete_zeitraum" value="10" min="1" max="50" step="1" style="width:4em;">
  </label><br>
  <label>
    Mietsteigerung pro Jahr [%]:
    <input type="number" id="miete_steigerung" value="2" min="0" max="10" step="0.1" style="width:4em;">
  </label>
  <br><br>
  <div id="miete-ohne-steigerung"></div>
  <div id="miete-mit-steigerung"></div>
</div>

<script>
function updateMiete() {
  // Input-Parameter
  const cold_rent_per_month = Number(document.getElementById('miete_monat').value);
  const zeitraum = Number(document.getElementById('miete_zeitraum').value);
  const average_rent_increase_rate = Number(document.getElementById('miete_steigerung').value) / 100;

  // Jahresmiete
  const miete = cold_rent_per_month * 12;

  // Gesamte Mietzahlungen ohne Steigerung
  const miete_ohne_steigerung = miete * zeitraum;

  // Gesamte Mietzahlungen mit Steigerung
  let miete_mit_steigerung = 0;
  for (let i = 0; i < zeitraum; i++) {
    miete_mit_steigerung += miete * Math.pow(1 + average_rent_increase_rate, i);
  }

  document.getElementById('miete-ohne-steigerung').innerHTML =
    `Gesamte Mietzahlungen über ${zeitraum} Jahre: ${miete_ohne_steigerung.toLocaleString('de-DE', {maximumFractionDigits: 2})} €`;

  document.getElementById('miete-mit-steigerung').innerHTML =
    `Gesamte Mietzahlungen über ${zeitraum} Jahre mit ${(average_rent_increase_rate*100).toFixed(1)}% Steigerung jährlich: ${miete_mit_steigerung.toLocaleString('de-DE', {maximumFractionDigits: 2})} €`;
}

// Initial output
updateMiete();

// Event Listener
document.getElementById('miete_zeitraum').addEventListener('input', updateMiete);
document.getElementById('miete_steigerung').addEventListener('input', updateMiete);
document.getElementById('miete_monat').addEventListener('input', updateMiete);
</script>


<!-- Visuelle Trennung -->
<hr style="margin: 2em 0; border: 0; border-top: 2px dashed #888;">


<!-- Neuer Abschnitt für zeitliche Dynamik -->
<div style="font-family:monospace;">
  <h3>Zeitliche Dynamik - Berücksichtigung des Faktors Zeit</h3>
  <label>
    Zeitraum [Jahre]:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="number" id="years" value="10" min="1" max="50" step="1"style="width: 3em;">
  </label><br>
  <label>
    Mietsteigerung pro Jahr [%]:&nbsp;&nbsp;&nbsp;
    <input type="number" id="average_rent_increase_rate" value="2" min="0" max="10" step="0.1"style="width: 3em;">
  </label><br>
  <label>
    Gehaltssteigerung pro Jahr [%]: 
    <input type="number" id="average_salary_increase_rate" value="2" min="0" max="50" step="0.1"style="width: 3em;">
  </label><br><br>
  <div id="dynamik-kaltmiete"></div>
  <div id="dynamik-vervielfaeltiger"></div>
  <div id="dynamik-einkommen-index"></div>
</div>
<script>
  // ...existing updateOutput() and event listeners...

  function updateDynamik() {
    const housing_cost = Number(document.getElementById('housing_cost').value);
    const cold_rent_per_month = Number(document.getElementById('cold_rent_per_month').value);
    const netto_income_per_anno = Number(document.getElementById('netto_income_per_anno').value);
    const years = Number(document.getElementById('years').value);
    const average_rent_increase_rate = Number(document.getElementById('average_rent_increase_rate').value) / 100;
    const average_salary_increase_rate = Number(document.getElementById('average_salary_increase_rate').value) / 100;

    // Berechnung wie im Notebook
    const kaltmiete_in_n_jahren = cold_rent_per_month * Math.pow(1 + average_rent_increase_rate, years);
    const vervielfaeltiger_in_n_jahren = cold_rent_per_month > 0
      ? (housing_cost) / (kaltmiete_in_n_jahren * 12)
      : '—';

    const netto_income_after_n_years = netto_income_per_anno * Math.pow(1 + average_salary_increase_rate, years);
    const cost_to_income_index = netto_income_after_n_years > 0
      ? housing_cost / netto_income_after_n_years
      : '—';

    document.getElementById('dynamik-kaltmiete').innerHTML =
      `Kaltmiete in ${years} Jahren: ${kaltmiete_in_n_jahren.toLocaleString('de-DE', {maximumFractionDigits: 2})} €`;

    document.getElementById('dynamik-vervielfaeltiger').innerHTML =
      `Vervielfältiger nach ${years} Jahren mit ${(average_rent_increase_rate*100).toFixed(1)}% Mietsteigerung: ${typeof vervielfaeltiger_in_n_jahren === 'number' ? vervielfaeltiger_in_n_jahren.toFixed(2) : '—'}`;

    document.getElementById('dynamik-einkommen-index').innerHTML =
      `Kaufpreis-Jahreseinkommens Index nach ${years} Jahren mit ${(average_salary_increase_rate*100).toFixed(1)}% Gehaltssteigerung: ${typeof cost_to_income_index === 'number' ? cost_to_income_index.toFixed(2) : '—'}`;
  }

  // Initial output für Dynamik
  updateDynamik();

  // Event Listener für Dynamik
  document.getElementById('years').addEventListener('input', updateDynamik);
  document.getElementById('average_rent_increase_rate').addEventListener('input', updateDynamik);
  document.getElementById('average_salary_increase_rate').addEventListener('input', updateDynamik);
  document.getElementById('housing_cost').addEventListener('input', updateDynamik);
  document.getElementById('cold_rent_per_month').addEventListener('input', updateDynamik);
  document.getElementById('netto_income_per_anno').addEventListener('input', updateDynamik);
</script>


<!-- Visuelle Trennung -->
<hr style="margin: 2em 0; border: 0; border-top: 2px dashed #888;">
